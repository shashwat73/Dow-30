install.packages("magrittr")
install.packages("plotly")
library(magrittr)
library(plotly)

x = list("Current Share Price", "Upside", "Intrinsic Value")
measure = c("relative", "relative", "total")
text = c("", "-15.54", "137.87")
y = c(159.97, -22.91, 137.87)
data = data.frame(x=factor(x,levels=x),measure,text,y)

fig <- plot_ly(
  data, name = "", type = "waterfall", measure = ~measure,
  x = ~x, textposition = "outside", y= ~y, text =~ text,
  connector = list(line = list(color = "rgb(63, 63, 63)")))
fig <- fig %>%
  layout(title = "Chevron Intrinsic Value",
         xaxis = list(title = ""),
         yaxis = list(title = "$"),
         autosize = TRUE,
         showLegend = FALSE)

fig
